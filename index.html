<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="icon" href="title11d1.png" type="image/png">
    <link rel="apple-touch-icon" href="title11d1.png">
    <meta property="og:title" content="Hệ Thống Xem Điểm - Lớp 11D1">
    <meta property="og:description" content="Lớp 11D1 - Năm Học 2025 - Học Kỳ 1">
    <meta property="og:image" content="https://rov230909.github.io/title11d1.png">
    <meta property="og:url" content="https://rov230909.github.io/index.html">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Hệ Thống Xem Điểm - Lớp 11D1">
    <meta name="twitter:description" content="Lớp 11D1 - Năm Học 2025 - Học Kỳ 1">
    <meta name="twitter:image" content="https://rov230909.github.io/title11d1.png">
    <title>Hệ Thống Xem Điểm - Lớp 11D1</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&display=swap" rel="stylesheet">
    <style>
        :root{--card-w:19em;--card-h:25em}
        *,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
        html{scroll-behavior:smooth;-webkit-overflow-scrolling:touch;touch-action:pan-y;transform:translateZ(0);will-change:transform;overscroll-behavior-y:none}
        body{transform:translateZ(0);will-change:transform;min-height:100vh;display:flex;flex-direction:column;overflow-x:hidden;position:relative}
        html,body,.container{-ms-overflow-style:none;scrollbar-width:none;overflow-y:auto}
        html::-webkit-scrollbar,body::-webkit-scrollbar,.container::-webkit-scrollbar{display:none!important;width:0!important;height:0!important}
        html,body{height:100%;-webkit-tap-highlight-color:transparent}
        body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#0f0c29,#302b63,#24243e);color:#fff}
        .container{max-width:1400px;margin:auto;width:100%;flex:1;display:flex;flex-direction:column;padding:0 15px 20px;position:relative;z-index:1}
        .header{text-align:center;padding:20px 15px 10px;flex-shrink:0;z-index:10}
        .header h1{font-size:2.6em;margin-bottom:8px;text-shadow:0 0 20px #9b40fc}
        .header p{font-size:1.1em;opacity:0.9}
        .music-toggle{position:fixed;bottom:20px;right:20px;width:60px;height:60px;background:rgba(155,64,252,0.3);backdrop-filter:blur(10px);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:9999;box-shadow:0 8px 25px rgba(155,64,252,0.4);transition:all .3s ease;border:2px solid rgba(155,64,252,0.5)}
        .music-toggle:hover{transform:scale(1.1);background:rgba(155,64,252,0.5)}
        .music-toggle.playing{animation:pulse 1.5s infinite}
        .music-toggle svg{width:28px;height:28px;fill:#fff;transition:.3s}
        @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(155,64,252,.7)}70%{box-shadow:0 0 0 15px rgba(155,64,252,0)}100%{box-shadow:0 0 0 0 rgba(155,64,252,0)}}
        .ranking-wrapper{margin:20px 0;background:rgba(255,255,255,.1);backdrop-filter:blur(12px);border-radius:16px;padding:20px;border:1px solid rgba(155,64,252,.3);box-shadow:0 8px 32px rgba(0,0,0,.3);flex-shrink:0;max-width:800px;width:100%;align-self:center;z-index:5;position:relative}
        .ranking-title{text-align:center;font-size:1.7em;margin-bottom:8px;color:#9b40fc;text-shadow:0 0 10px rgba(155,64,252,.5);font-weight:bold}
        .ranking-note{text-align:center;font-size:.85em;color:#ccc;font-style:italic;margin-bottom:15px;opacity:.9}
        .ranking-table-container{max-height:400px;overflow-y:auto;border-radius:12px;scrollbar-width:thin;scrollbar-color:rgba(155,64,252,.3) transparent;transform:translateZ(0);will-change:transform,scroll-position;opacity:0;transition:opacity .4s ease}
        .ranking-table-container.visible{opacity:1}
        .ranking-table-container::-webkit-scrollbar{width:10px}
        .ranking-table-container::-webkit-scrollbar-track{background:transparent;border-radius:10px;margin:4px 0}
        .ranking-table-container::-webkit-scrollbar-thumb{background:rgba(155,64,252,.3);border-radius:10px;border:2px solid transparent;background-clip:content-box;transition:all .3s ease}
        .ranking-table-container::-webkit-scrollbar-thumb:hover{background:rgba(155,64,252,.6);box-shadow:0 0 10px rgba(155,64,252,.5)}
        .ranking-table{width:100%;border-collapse:collapse;font-size:.95em}
        .ranking-table th{background:rgba(155,64,252,.3);color:#fff;padding:14px 12px;text-align:center;font-weight:bold;position:sticky;top:0;z-index:2;transform:translateZ(0)}
        .ranking-table td{padding:14px 12px;text-align:center;border-bottom:1px solid rgba(255,255,255,.1);vertical-align:middle}
        .ranking-table tr:hover{background:rgba(155,64,252,.15);transition:.2s}
        .rank-badge{display:inline-block;width:32px;height:32px;line-height:32px;border-radius:50%;font-weight:bold;font-size:.95em;color:white}
        .rank-1{background:linear-gradient(45deg,#ffd700,#ffaa00);box-shadow:0 0 18px #ffd700}
        .rank-2{background:linear-gradient(45deg,#c0c0c0,#aaa);box-shadow:0 0 15px #c0c0c0}
        .rank-3{background:linear-gradient(45deg,#cd7f32,#a97142);box-shadow:0 0 15px #cd7f32}
        .rank-other{background:rgba(155,64,252,.7)}
        .student-name-rank{font-weight:600;color:#e0e0ff;max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
        .avg-score{font-weight:bold;color:#9b40fc;font-size:1.1em}
        .loader{--main-size:4em;--text-color:#fff;--shine-color:#fff4;--shadow-color:#aaa;display:flex;justify-content:center;align-items:center;overflow:hidden;user-select:none;position:relative;font-size:var(--main-size);font-weight:900;text-transform:uppercase;color:var(--text-color);width:7.3em;height:1em;filter:drop-shadow(0 0 .05em var(--shine-color))}
        .loader .text{display:flex;align-items:center;justify-content:center;text-align:center;white-space:nowrap;overflow:hidden;position:absolute}
        .loader .text:nth-child(1){clip-path:polygon(0% 0%,11.11% 0%,11.11% 100%,0% 100%);font-size:calc(var(--main-size)/20);margin-left:-2.1em;opacity:.6}
        .loader .text:nth-child(2){clip-path:polygon(11.11% 0%,22.22% 0%,22.22% 100%,11.11% 100%);font-size:calc(var(--main-size)/16);margin-left:-.98em;opacity:.7}
        .loader .text:nth-child(3){clip-path:polygon(22.22% 0%,33.33% 0%,33.33% 100%,22.22% 100%);font-size:calc(var(--main-size)/13);margin-left:-.33em;opacity:.8}
        .loader .text:nth-child(4){clip-path:polygon(33.33% 0%,44.44% 0%,44.44% 100%,33.33% 100%);font-size:calc(var(--main-size)/11);margin-left:-.05em;opacity:.9}
        .loader .text:nth-child(5){clip-path:polygon(44.44% 0%,55.55% 0%,55.55% 100%,44.44% 100%);font-size:calc(var(--main-size)/10);margin-left:0;opacity:1}
        .loader .text:nth-child(6){clip-path:polygon(55.55% 0%,66.66% 0%,66.66% 100%,55.55% 100%);font-size:calc(var(--main-size)/11);margin-left:.05em;opacity:.9}
        .loader .text:nth-child(7){clip-path:polygon(66.66% 0%,77.77% 0%,77.77% 100%,66.66% 100%);font-size:calc(var(--main-size)/13);margin-left:.33em;opacity:.8}
        .loader .text:nth-child(8){clip-path:polygon(77.77% 0%,88.88% 0%,88.88% 100%,77.77% 100%);font-size:calc(var(--main-size)/16);margin-left:.98em;opacity:.7}
        .loader .text:nth-child(9){clip-path:polygon(88.88% 0%,100% 0%,100% 100%,88.88% 100%);font-size:calc(var(--main-size)/20);margin-left:2.1em;opacity:.6}
        .loader .text span{animation:scrolling 2s cubic-bezier(.1,.6,.9,.4) infinite,shadow 2s cubic-bezier(.1,.6,.9,.4) infinite}
        .loader .text:nth-child(1) span{background:linear-gradient(to right,var(--text-color) 4%,var(--shadow-color) 7%);background-size:200% auto;background-clip:text;color:transparent}
        .loader .text:nth-child(2) span{background:linear-gradient(to right,var(--text-color) 9%,var(--shadow-color) 13%);background-size:200% auto;background-clip:text;color:transparent}
        .loader .text:nth-child(3) span{background:linear-gradient(to right,var(--text-color) 15%,var(--shadow-color) 18%);background-size:200% auto;background-clip:text;color:transparent}
        .loader .text:nth-child(4) span{background:linear-gradient(to right,var(--text-color) 20%,var(--shadow-color) 23%);background-size:200% auto;background-clip:text;color:transparent}
        .loader .text:nth-child(6) span{background:linear-gradient(to right,var(--shadow-color) 29%,var(--text-color) 32%);background-size:200% auto;background-clip:text;color:transparent}
        .loader .text:nth-child(7) span{background:linear-gradient(to right,var(--shadow-color) 34%,var(--text-color) 37%);background-size:200% auto;background-clip:text;color:transparent}
        .loader .text:nth-child(8) span{background:linear-gradient(to right,var(--shadow-color) 39%,var(--text-color) 42%);background-size:200% auto;background-clip:text;color:transparent}
        .loader .text:nth-child(9) span{background:linear-gradient(to right,var(--shadow-color) 45%,var(--text-color) 48%);background-size:200% auto;background-clip:text;color:transparent}
        .loader .line{position:relative;display:flex;align-items:center;justify-content:center;overflow:hidden;height:.05em;width:calc(var(--main-size)/2);margin-top:.9em;border-radius:.05em}
        .loader .line::before{content:"";position:absolute;height:100%;width:100%;background-color:var(--text-color);opacity:.3}
        .loader .line::after{content:"";position:absolute;height:100%;width:100%;background-color:var(--text-color);border-radius:.05em;transform:translateX(-90%);animation:wobble 2s cubic-bezier(.5,.8,.5,.2) infinite}
        @keyframes wobble{0%{transform:translateX(-90%)}50%{transform:translateX(90%)}100%{transform:translateX(-90%)}}
        @keyframes scrolling{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}
        @keyframes shadow{0%{background-position:-98% 0}100%{background-position:102% 0}}
        #rankingLoading{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(255,255,255,.08);backdrop-filter:blur(8px);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:10;border-radius:16px;transition:opacity .4s ease}
        .modal-loading{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(17,17,17,.98);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:999;transition:opacity .4s ease}
        .modal-loading.hidden,#rankingLoading.hidden{opacity:0;pointer-events:none}
        .grid{padding:20px 10px 30px;display:grid;grid-template-columns:repeat(auto-fill,minmax(var(--card-w),1fr));gap:2em;justify-content:center;scrollbar-width:none}
        .grid::-webkit-scrollbar{display:none}
        .card{position:relative;width:var(--card-w);height:var(--card-h);margin:0 auto;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#171717;color:white;font-family:Montserrat,sans-serif;font-weight:bold;padding:1em 2em 1em 1em;border-radius:20px;overflow:hidden;cursor:pointer;z-index:1;row-gap:1em;transition:transform .4s cubic-bezier(.25,.8,.25,1);box-shadow:0 10px 30px rgba(0,0,0,.5);will-change:transform}
        .card:hover{transform:translateY(-12px) translateZ(0)}
        .card img{width:12em;margin-right:1em;animation:move 10s ease-in-out infinite;z-index:5;user-select:none;pointer-events:none}
        .heading{z-index:2;transition:letter-spacing .3s ease;font-size:1.35em;text-align:center;text-shadow:0 2px 10px #000}
        .card:hover .heading{letter-spacing:.025em}
        .heading::after{content:"";top:-8.5%;left:-8.5%;position:absolute;width:7.5em;height:7.5em;border-radius:50%;background:#f9f9fb;box-shadow:0 0 100px rgba(193,119,241,.8),inset #9b40fc 0 0 40px -12px;transition:box-shadow .4s ease;z-index:-1}
        .card:hover .heading::after{box-shadow:0 0 200px rgba(193,119,241,1),inset #9b40fc 0 0 40px -12px}
        .icons{display:flex;align-items:center;justify-content:center;flex-direction:row;column-gap:1em;z-index:1}
        .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.95);backdrop-filter:blur(10px);z-index:9998;justify-content:center;align-items:center;padding:20px;box-sizing:border-box;opacity:0;transition:opacity .3s ease}
        .modal.active{display:flex;opacity:1}
        .modal-content{width:100%;max-width:1000px;height:90vh;background:#111;border-radius:20px;overflow:hidden;position:relative;box-shadow:0 20px 60px rgba(0,0,0,.8);transform:translateZ(0)}
        .modal-header{position:absolute;top:0;left:0;right:0;height:50px;background:rgba(155,64,252,.3);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:space-between;padding:0 20px;z-index:10;border-bottom:1px solid rgba(155,64,252,.5)}
        .modal-title{font-size:1.3em;font-weight:bold;color:#fff}
        .rank-indicator{display:inline-flex;align-items:center;gap:8px;margin-left:15px;padding:6px 14px;background:rgba(255,255,255,.15);border-radius:20px;font-size:.85em;animation:fadeIn .5s ease}
        .rank-indicator .rank-badge{width:26px;height:26px;line-height:26px;font-size:.85em}
        @keyframes fadeIn{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}
        .close-modal{background:none;border:none;color:#fff;font-size:1.8em;cursor:pointer;padding:5px;line-height:1;transition:.3s}
        .close-modal:hover{color:#ff5c5c;transform:scale(1.1)}
        .modal-iframe{width:100%;height:calc(100% - 50px);border:none;margin-top:50px;background:#fff}
        .footer-wrapper{margin-top:auto;display:flex;flex-direction:column;align-items:center;gap:15px;padding:20px 15px 80px}
        .info-box{background:rgba(255,255,255,.1);backdrop-filter:blur(10px);padding:16px;border-radius:15px;max-width:500px;width:100%;border-left:4px solid #9b40fc;font-size:.95em;text-align:center}
        .stats{display:flex;justify-content:center;gap:3em;padding:15px 0;background:rgba(0,0,0,.3);border-radius:15px;flex-wrap:wrap;max-width:500px;width:100%}
        .stat-number{font-size:2.5em;font-weight:bold;color:#9b40fc}
        @keyframes move{0%,100%{transform:translate(0,0)}25%{transform:translate(-1em,-1em) rotate(-10deg)}50%{transform:translate(-1em,1em)}75%{transform:translate(1em,-1.25em) rotate(10deg)}}
        .show-stats-btn{background:rgba(155,64,252,.3);backdrop-filter:blur(10px);border:2px solid rgba(155,64,252,.5);color:#fff;padding:12px 24px;border-radius:12px;font-weight:bold;font-size:1em;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 15px rgba(155,64,252,.3)}
        .show-stats-btn:hover{background:rgba(155,64,252,.6);transform:translateY(-2px);box-shadow:0 6px 20px rgba(155,64,252,.5)}
        #subjectStatsBody td{min-width:80px;word-break:break-word;line-height:1.4}
        #subjectStatsBody .subject-top-student{font-weight:600;color:#e0f2ff;white-space:normal;max-width:140px}
        #subjectStatsBody .subject-score{font-weight:bold;color:#9b40fc;font-size:1.1em}
        @media (max-width:480px){:root{--card-w:17em;--card-h:23em}.header h1{font-size:2.1em}.grid{gap:1.5em;padding:10px 5px 20px}.ranking-wrapper{margin:15px 0;padding:15px}.ranking-title{font-size:1.4em}.ranking-note{font-size:.8em}.ranking-table th,.ranking-table td{padding:10px 8px;font-size:.82em}.student-name-rank{max-width:90px}.stats{gap:20px;padding:12px}.stat-number{font-size:2em}.modal-content{height:95vh;border-radius:15px}.modal-header{height:45px;padding:0 15px}.modal-title{font-size:1.1em}.rank-indicator{margin-left:8px;padding:4px 10px;font-size:.75em}.rank-indicator .rank-badge{width:22px;height:22px;line-height:22px;font-size:.8em}.music-toggle{width:50px;height:50px;bottom:15px;right:15px}.music-toggle svg{width:22px;height:22px}.show-stats-btn{padding:10px 18px;font-size:.9em}#subjectStatsBody td{padding:10px 6px;font-size:.8em}}
    </style>
</head>
<body>
    <audio id="bgMusic" loop preload="auto">
        <source src="vnn.mp3" type="audio/mpeg">
    </audio>

    <div class="container">
        <div class="header">
            <h1>11D1</h1>
            <p>Lớp 11D1 - Năm Học 2025 - Học Kỳ 1</p>
        </div>
        <div class="ranking-wrapper">
            <div class="ranking-title">BẢNG XẾP HẠNG</div>
            <div class="ranking-note">Bảng xếp hạng sẽ thay đổi khi điểm có sự thay đổi từ hệ thống VNedu!</div>

            <div id="rankingLoading">
                <div class="loader">
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="line"></div>
                </div>
                <p style="margin-top:20px;font-size:.9em;opacity:.7">Đợi một tí bro!</p>
            </div>

            <div class="ranking-table-container" id="rankingTableContainer">
                <table class="ranking-table" id="rankingTable">
                    <thead>
                        <tr>
                            <th>Hạng</th>
                            <th>Họ và tên</th>
                            <th>Điểm</th>
                        </tr>
                    </thead>
                    <tbody id="rankingBody"></tbody>
                </table>
            </div>

            <div style="text-align:center;margin-top:15px">
                <button id="showSubjectStatsBtn" class="show-stats-btn">
                    Xem thống kê top 1
                </button>
            </div>
        </div>

        <div class="grid" id="studentGrid"></div>
        <div class="footer-wrapper">
            <div class="info-box">
                <p>Copyright © 2025 Thạch Mô Ra (Rov)</p>
            </div>
            <div class="stats">
                <div><span class="stat-number" id="totalStudents">0</span><br>Học Sinh</div>
                <div><span class="stat-number">11D1</span><br>Lớp</div>
            </div>
        </div>
    </div>

    <div class="music-toggle" id="musicToggle">
        <svg viewBox="0 0 24 24" id="musicIcon">
            <path d="M12,3V13.55C11.41,13.19 10.73,13 10,13A4,4 0 0,0 6,17A4,4 0 0,0 10,21A4,4 0 0,0 14,17V7H18V3H12M10,19A2,2 0 0,1 8,17A2,2 0 0,1 10,15A2,2 0 0,1 12,17A2,2 0 0,1 10,19Z"/>
        </svg>
    </div>

    <div class="modal" id="gradeModal">
        <div class="modal-content">
            <div class="modal-header">
                <div style="display:flex;align-items:center;flex:1">
                    <div class="modal-title" id="modalTitle">Đang tải...</div>
                    <div id="rankDisplay" class="rank-indicator" style="display:none"></div>
                </div>
                <button class="close-modal" id="closeModal">×</button>
            </div>
            <iframe class="modal-iframe" id="gradeIframe"></iframe>
            <div class="modal-loading" id="modalLoading">
                <div class="loader">
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="text"><span>Loading</span></div>
                    <div class="line"></div>
                </div>
                <p style="margin-top:20px;font-size:.9em;opacity:.7">Đợi một tí bro...</p>
            </div>
        </div>
    </div>

    <div class="modal" id="subjectStatsModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Top 1 Của Các Môn Học</div>
                <button class="close-modal" id="closeSubjectStats">×</button>
            </div>
            <div class="modal-body" style="padding:20px;overflow-y:auto;height:calc(100% - 50px)">
                <div id="subjectStatsLoading" class="modal-loading">
                    <div class="loader">
                        <div class="text"><span>Loading</span></div>
                        <div class="text"><span>Loading</span></div>
                        <div class="text"><span>Loading</span></div>
                        <div class="text"><span>Loading</span></div>
                        <div class="text"><span>Loading</span></div>
                        <div class="text"><span>Loading</span></div>
                        <div class="text"><span>Loading</span></div>
                        <div class="text"><span>Loading</span></div>
                        <div class="text"><span>Loading</span></div>
                        <div class="line"></div>
                    </div>
                    <p style="margin-top:20px;font-size:.9em;opacity:.7">Đang xử lí...</p>
                </div>
                <div id="subjectStatsContent" style="display:none">
                    <table class="ranking-table" style="width:100%;margin-top:10px">
                        <thead>
                            <tr>
                                <th style="width:38%">Môn học</th>
                                <th style="width:38%">Top 1</th>
                                <th style="width:24%">Điểm</th>
                            </tr>
                        </thead>
                        <tbody id="subjectStatsBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        const audio = document.getElementById('bgMusic');
        const toggleBtn = document.getElementById('musicToggle');
        const icon = document.getElementById('musicIcon');
        let isPlaying = false, hasInteracted = false;
